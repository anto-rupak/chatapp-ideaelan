{"version":3,"sources":["../../src/pages/chat-content/chat-content.module.ts","../../src/pages/chat-content/chat-content.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ChatContentPage } from './chat-content';\r\n//import { ImageLoaderConfig } from 'ionic-image-loader';\r\nimport { IonicImageLoader } from 'ionic-image-loader';\r\n@NgModule({\r\n  declarations: [\r\n    ChatContentPage,\r\n  \r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ChatContentPage),\r\n    IonicImageLoader\r\n  ],\r\n})\r\nexport class ChatContentPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat-content/chat-content.module.ts","import { Component , ViewChild} from '@angular/core';\r\nimport { IonicPage, NavController, NavParams , Content} from 'ionic-angular';\r\nimport * as firebase from 'Firebase';\r\nimport { Storage } from '@ionic/storage';\r\nimport { Camera,CameraOptions} from '@ionic-native/camera';\r\nimport {  AngularFireStorage, AngularFireUploadTask } from '@angular/fire/storage';\r\nimport { ImageLoaderConfig } from 'ionic-image-loader';\r\nimport { HttpClient } from '@angular/common/http';\r\n/**\r\n * Generated class for the ChatContentPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-chat-content',\r\n  templateUrl: 'chat-content.html',\r\n})\r\nexport class ChatContentPage {\r\n  @ViewChild('content') content: Content;\r\n  //@ViewChild(Content) content: Content;\r\n  imageContent:any\r\n  myPhotosRef :any;\r\n  data = { type:'', nickname:'', message:'' };\r\n  chats = [];\r\n  roomkey:string;\r\n  nickname:string;\r\n  roomname:string;\r\n  offStatus:boolean = false;\r\n  adminid:any;\r\n  instid:any;\r\n  userid:any;\r\n  useridFrom:any;\r\n  role:any;\r\n  chat=[]\r\n  questions=[]\r\n  answer:any=[];\r\n  userJson :any;\r\n  curuser:any;\r\n  myphoto:any\r\n  myphotourl:any\r\n  image:any;\r\n  uri:any;\r\n  updateduri:any;\r\n  url:any;\r\n  ticketId:any;\r\n  appUrl:any;\r\n  pins:any;\r\n  senderName:any;\r\n  source:any;\r\n  chatType:any;\r\n  AppointmentIdGot:any;\r\n  idDetails:any;\r\n  idVal:any;\r\nidValParam:any;\r\nOrderId:any;\r\nProviderId:any;\r\nWorkOrderId:any;\r\ngetUserDetails:any;\r\nuserChatDetailsJson:any;\r\nuserEmail:any;\r\nuserChatJson:any;\r\ngetFacilitiesTechnicalIssueUrl:any;\r\nfilteredJson:any;\r\nuserFacilitiesTechnicalIssuesJson :any;\r\n  constructor( public http: HttpClient,public navCtrl: NavController, public navParams: NavParams ,public storage: Storage, public storageimage: AngularFireStorage,\r\n    public camera:Camera) {\r\n    \r\n      this.myPhotosRef = firebase.storage().ref('/Photos/');\r\n  }\r\n  async ionViewDidLeave()\r\n  {\r\n    //this.roletype == \"super\"||this.roletype == \"providerAdmin\"||this.roletype == \" admin\"\r\n  //labAdmin\r\n    if(this.role==\"providerAdmin\"||this.role==\"admin\"||this.role==\"super\")\r\n{\r\n  let user=this.userJson.UserId;\r\n  console.log(\"user\",user);\r\n  console.log(` cc 1 when leave    ${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.instid}/${this.adminid}/${this.useridFrom}/chats`);\r\nlet dbCon = await firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.instid}/${this.adminid}/${this.useridFrom}/chats`);\r\ndbCon.once(\"value\", function(snapshot) {\r\n  console.log(\"snapshot\",snapshot);\r\n  snapshot.forEach(function(child) {\r\n    //console.log(\"snap\",child.val().user);\r\n    console.log(\"child and user\",child.val().user,user)\r\n    if(child.val().user != user)\r\n    child.ref.update({\r\n      status:'read'\r\n    });\r\n  });\r\n})\r\n}else if (this.role==\"user\" ||this.role==\"labAdmin\")\r\n{let user=this.userJson.UserId;\r\n  console.log(`cc3 when leaved ${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.instid}/${this.adminid}/${this.userJson.UserId}/chats`)\r\n  let dbCon = await firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.instid}/${this.adminid}/${this.userJson.UserId}/chats`);\r\n  dbCon.once(\"value\", function(snapshot) {\r\n    //console.log(\"snapshot\",snapshot);\r\n    snapshot.forEach(function(child) {\r\n      //console.log(\"snap\",child.val().user);\r\n     // console.log(\"child and user\",child.val().user,user)\r\n      if(child.val().user != user)\r\n      child.ref.update({\r\n        status:'read'\r\n      });\r\n    });\r\n  })\r\n}\r\n  }\r\n  async ionViewDidLoad() {\r\n   await this.storage.get('userDetails').then((val1) => {\r\n      this.userJson = val1;\r\n\r\n    });\r\n    \r\n    await this.storage.get('appLink').then((val) => {\r\n      this.appUrl = val;\r\n      this.getUserDetails = this.appUrl + '/WS/IdeaElanService.svc/GetAdminByEntity';\r\n      this.getFacilitiesTechnicalIssueUrl = this.appUrl + '/WS/IdeaElanService.svc/GetTechnicalIssues';\r\n    });\r\n    console.log(\"userjson\",this.userJson.UserId);\r\n    this.adminid= this.navParams.get(\"adminid\");\r\n    this.instid=this.navParams.get(\"instrumentid\");\r\n    this.useridFrom=this.navParams.get(\"userid\");\r\n    this.pins=this.navParams.get(\"pin\");\r\n    this.role=this.navParams.get(\"role\");\r\n    this.ticketId=this.navParams.get(\"ticketid\");\r\n    this.senderName=this.navParams.get(\"senderName\");\r\n    this.source=this.navParams.get(\"source\");\r\n    this.chatType=this.navParams.get(\"chatType\")\r\n    this.OrderId=this.navParams.get(\"OrderId\");\r\n    this.ProviderId=this.navParams.get(\"ProviderId\");\r\n    this.WorkOrderId=this.navParams.get(\"WorkOrderId\");\r\n    console.log(\"userid \",this.useridFrom);\r\n    //this.userEmail=this.navParams.get(\"userEmail\");\r\n    if(this.useridFrom!=null)\r\n    {\r\n      if(this.role==\"providerAdmin\"||this.role==\"admin\"||this.role==\"super\")\r\n      {\r\n        this.loadUserDetails(this.useridFrom,5);\r\n      }\r\n    }\r\n    console.log(\"ticket id , instid from chat content page \", this.ticketId,this.instid);\r\n    console.log(\"admin\",this.adminid);\r\n    console.log(\"instrumentid\",this.instid);\r\n    console.log(\"typeofchat\",this.chatType);\r\n    console.log(\"ORDER ID\", this.OrderId);\r\n    console.log(\"provider id \", this.ProviderId);\r\n   \r\n    this.AppointmentIdGot= this.navParams.get(\"AppointmentId\");\r\n    this.roomkey = this.navParams.get(\"key\") as string;\r\n    this.nickname = this.userJson.UserId;\r\n    this.roomname= this.instid;\r\n    console.log(\"roomname\",this.roomname);\r\n    this.data.type = 'message';\r\n    this.data.nickname = this.userJson.UserId;\r\n    this.data.message = '';\r\n    setTimeout(() => { this.content.scrollToBottom(); }, 200);\r\n    console.log(\"appointment id chat content page\", this.AppointmentIdGot);\r\n\r\n\r\n    this.idDetails=\"\";\r\n    this.idVal=\"\"\r\n    if(this.chatType==\"TechnicalIssues\")\r\n    {\r\n      this.idDetails=\"ticketid\"\r\n       this.idVal=this.ticketId\r\n       this.idValParam=this.instid\r\n\r\nthis.getAllIssues();\r\n\r\n\r\n\r\n    }\r\n    else if(this.chatType==\"Reservations\")\r\n    {\r\n      this.idDetails=\"appointmentId\"\r\n       this.idVal=this.AppointmentIdGot;\r\n       this.idValParam=this.instid;\r\n    } \r\n    else if(this.chatType==\"SuppliesOrder\") \r\n    {\r\n      this.idDetails=\"orderId\"\r\n      this.idVal=this.OrderId;\r\n      this.idValParam=this.ProviderId;\r\n    }\r\n\r\n    else if(this.chatType==\"SampleSubmission\")\r\n    {\r\n      this.idDetails=\"WorkOrderId\"\r\n      this.idVal=this.WorkOrderId;\r\n      this.idValParam=this.ProviderId;\r\n    }\r\n\r\n\r\nif(this.role==\"providerAdmin\"||this.role==\"admin\"||this.role==\"super\")\r\n{\r\n  let user=this.userJson.UserId;\r\n  console.log(\"user\",user);\r\n  console.log(` cc 1 ${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.useridFrom}/chats`);\r\nlet dbCon = await firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.useridFrom}/chats`);\r\ndbCon.once(\"value\", function(snapshot) {\r\n  console.log(\"snapshot\",snapshot);\r\n  snapshot.forEach(function(child) {\r\n    //console.log(\"snap\",child.val().user);\r\n    console.log(\"child and user\",child.val().user,user)\r\n    if(child.val().user != user)\r\n    child.ref.update({\r\n      status:'read'\r\n    });\r\n  });\r\n}).then(async () => {\r\n     console.log(`cc 2 ${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.useridFrom}/chats`)\r\n    await firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.useridFrom}/chats`).on('value', resp => {\r\n      this.chats = [];\r\n      this.chats = snapshotToArray(resp);\r\n      console.log(\"chats123456\",this.chats);\r\n      setTimeout(() => {\r\n        if(this.offStatus === false) {\r\n         // this.content.scrollToBottom(300);\r\n        }\r\n      }, 1000);\r\n    });\r\n\r\n\r\n\r\n    });\r\n\r\n\r\n\r\n  }\r\n  else if( this.role==\"user\"||this.role==\"labAdmin\")\r\n  {\r\n    /*\r\n    let idDetails=\"\";\r\n    let idVal=\"\"\r\n      if(this.chatType==\"TechnicalIssues\")\r\n      {\r\n        idDetails=\"ticketid\"\r\n         idVal=this.ticketId\r\n      }\r\n      else if(this.chatType==\"Reservations\")\r\n      {\r\n        idDetails=\"appointmentId\"\r\n         idVal=this.AppointmentIdGot\r\n      }\r\n\r\n*/\r\n\r\n\r\n    let user=this.userJson.UserId;\r\n   // console.log(\"user\",user);\r\n  //  console.log(`${this.pins}/chatrooms/TechnicalIssues/${this.ticketId}/${this.instid}/${this.adminid}/${this.userJson.UserId}/chats`);\r\n  console.log(`cc3 ${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.userJson.UserId}/chats`)\r\n  let dbCon = await firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.userJson.UserId}/chats`);\r\n  dbCon.once(\"value\", function(snapshot) {\r\n    //console.log(\"snapshot\",snapshot);\r\n    snapshot.forEach(function(child) {\r\n      //console.log(\"snap\",child.val().user);\r\n     // console.log(\"child and user\",child.val().user,user)\r\n      if(child.val().user != user)\r\n      child.ref.update({\r\n        status:'read'\r\n      });\r\n    });\r\n  }).then(async () => {\r\n       console.log(`cc4 ${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.userJson.UserId}/chats`)\r\n    await firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.userJson.UserId}/chats`).on('value', resp => {\r\n      this.chats = [];\r\n      this.chats = snapshotToArray(resp);\r\n      //console.log(\"chats123456 user\",this.chats);\r\n      setTimeout(() => {\r\n        if(this.offStatus === false) {\r\n        }\r\n      \r\n      }, 1000);\r\n    });\r\n  \r\n  \r\n      });\r\n    this.loadAdminImage();\r\n    \r\n  }\r\n}\r\ngetAllIssues()\r\n{\r\n\r\nconsole.log(\"ticket id\",this.ticketId);\r\n  this.http.post(this.getFacilitiesTechnicalIssueUrl, {\r\n    userid: this.userJson.UserId,\r\n    usertoken: this.userJson.UserToken,\r\n   paramname: `UserId`,\r\n    paramvalue:this.userJson.UserId\r\n  })\r\n    .subscribe(\r\n      (data: any) => {\r\n        //RESPONSE\r\n\r\n        let filteredJson;\r\n        let resSTR = JSON.stringify(data);\r\n        let resJSON = JSON.parse(resSTR);\r\n        this.userFacilitiesTechnicalIssuesJson = resJSON;\r\n        console.log(\"test\",this.userFacilitiesTechnicalIssuesJson);\r\n        if(this.userFacilitiesTechnicalIssuesJson != null){\r\n          this.filteredJson = this.userFacilitiesTechnicalIssuesJson.filter(i => i.TicketId == this.ticketId);\r\n          console.log(\"test\",this.filteredJson);\r\n        }\r\n\r\n        for(let i=0;i<this.userFacilitiesTechnicalIssuesJson.length;i++)\r\n        {\r\n            if(this.userFacilitiesTechnicalIssuesJson[i][`TicketId`]==this.ticketId)\r\n            {\r\n              this.filteredJson=this.userFacilitiesTechnicalIssuesJson[i];\r\n   this.filteredJson = JSON.parse(JSON.stringify(this.filteredJson));\r\n              console.log(\"demo\",this.filteredJson.Description)\r\n            }\r\n        }\r\n        // \r\n\r\n        //loader.dismiss();\r\n\r\nconsole.log(\"filteredjson\",this.filteredJson);\r\n\r\n      },//ERROR HANDLING\r\n      error => {\r\n\r\n       \r\n      }\r\n    );\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n  async sendMessage() {\r\n    /*\r\n    let idDetails=\"\";\r\n    let idVal=\"\"\r\n      if(this.chatType==\"TechnicalIssues\")\r\n      {\r\n        idDetails=\"ticketid\"\r\n         idVal=this.ticketId\r\n      }\r\n      else if(this.chatType==\"Reservations\")\r\n      {\r\n        idDetails=\"appointmentId\"\r\n         idVal=this.AppointmentIdGot\r\n         console.log(`appointment , idval`,this.AppointmentIdGot,idVal);\r\n      }\r\n*/\r\n\r\n    if (this.data.message.replace(/\\s/g, '').length) {\r\n      console.log('string only contains whitespace (ie. spaces, tabs or line breaks)');\r\n    \r\n    if(this.role==\"providerAdmin\"||this.role==\"admin\"||this.role==\"super\")\r\n    {\r\n      console.log(` cc5 ${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.useridFrom}/chats`);\r\n      let newData = await firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.useridFrom}/chats`).push();\r\n      newData.set({\r\n        type:this.data.type,\r\n        user:this.data.nickname,\r\n        message:this.data.message,\r\n        sendDate:Date(),\r\n        status:'unread'\r\n      });\r\n      this.data.message = '';\r\n      }\r\n      else if( this.role==\"user\"||this.role==\"labAdmin\")\r\n      {\r\n        \r\n   console.log(` cc 6${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.userJson.UserId}/chats`)\r\n    let newData =  firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.userJson.UserId}/chats`).push();\r\n    newData.set({\r\n      type:this.data.type,\r\n      user:this.data.nickname,\r\n      message:this.data.message,\r\n      sendDate:Date(),\r\n      status:'unread'\r\n    });\r\n   \r\n    this.data.message = '';\r\n      }\r\n    }\r\n   // this.data.message = '';\r\n   setTimeout(()=>{this.content.scrollToBottom();},200); \r\n  }\r\n  async sendMessages(updateduri) {\r\n    /*\r\n    let idDetails=\"\";\r\n    let idVal=\"\"\r\n      if(this.chatType==\"TechnicalIssues\")\r\n      {\r\n        idDetails=\"ticketid\"\r\n         idVal=this.ticketId\r\n      }\r\n      else if(this.chatType==\"Reservations\")\r\n      {\r\n        idDetails=\"appointmentId\"\r\n         idVal=this.AppointmentIdGot\r\n      }\r\n*/\r\n//alert(`${updateduri}`)\r\n    console.log(\"adminid\",this.adminid);\r\n    console.log(\"userid\",this.userid);\r\n        if(this.role==\"providerAdmin\"||this.role==\"admin\"||this.role==\"super\")\r\n        {\r\n          console.log(` cc 7${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.useridFrom}/chats`);\r\n          let newData = await firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.useridFrom}/chats`).push();\r\n          newData.set({\r\n            type:'image',\r\n            user:this.data.nickname,\r\n            message:updateduri,\r\n            sendDate:Date(),\r\n            status:'unread'\r\n          });\r\n          this.data.message = '';\r\n          }\r\n          else if( this.role==\"user\"||this.role==\"labAdmin\")\r\n          {\r\n            \r\n       console.log(` cc 8${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.userJson.UserId}/chats`)\r\n        let newData =  firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/${this.userJson.UserId}/chats`).push();\r\n        newData.set({\r\n          type:'image',\r\n          user:this.data.nickname,\r\n          message:updateduri,\r\n          sendDate:Date(),\r\n          status:'unread'\r\n        });\r\n       \r\n        this.data.message = '';\r\n          }\r\n    \r\n       // this.data.message = '';\r\n      }\r\n async adduserid()\r\n{ \r\n  \r\n  /*\r\n  let idDetails=\"\";\r\nlet idVal=\"\"\r\n  if(this.chatType==\"TechnicalIssues\")\r\n  {\r\n    idDetails=\"ticketid\"\r\n     idVal=this.ticketId\r\n  }\r\n  else if(this.chatType==\"Reservations\")\r\n  {\r\n    idDetails=\"appointmentId\"\r\n     idVal=this.AppointmentIdGot\r\n  }\r\n  */\r\nconsole.log(` cc 9${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/`);\r\n  let ref= firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}/`);\r\n  ref.child(`${this.curuser}`).set({\r\n    userid:`${this.curuser}`\r\n  }); \r\n  return 0;\r\n}\r\nasync loadAdminImage()\r\n{\r\n  /*\r\n  let idDetails=\"\";\r\n  let idVal=\"\"\r\n    if(this.chatType==\"TechnicalIssues\")\r\n    {\r\n      idDetails=\"ticketid\"\r\n       idVal=this.ticketId\r\n    }\r\n    else if(this.chatType==\"Reservations\")\r\n    {\r\n      idDetails=\"appointmentId\"\r\n       idVal=this.AppointmentIdGot\r\n    }\r\n    */\r\nconsole.log(`cc 10 ${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}`)\r\n // console.log(`chatrooms/${this.instid}/${this.adminid}`);\r\n  await firebase.database().ref(`${this.pins}/chatrooms/${this.chatType}/${this.idVal}/${this.idValParam}/${this.adminid}`).on('value', resp => {\r\n    this.imageContent = [];\r\n    this.imageContent = snapshotToArrayNew(resp);\r\n   console.log( \"imagecontent\",this.imageContent);\r\n  });\r\n}\r\n\r\n  exitChat() {\r\n    this.offStatus = true;\r\n\r\n   this.navCtrl.pop();\r\n  }\r\n\r\n \r\n \r\n  async uploadHandler() {\r\n  \r\n    const base64 = await this.changeimage();\r\n    this.createUploadTask(base64);\r\n   \r\n   }\r\n   async changeimage()\r\n   {\r\n     const options: CameraOptions = {\r\n       quality: 100,\r\n       destinationType: this.camera.DestinationType.DATA_URL,\r\n       encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n       sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\r\n       saveToPhotoAlbum:false\r\n     }\r\n  \r\n     return await this.camera.getPicture(options)\r\n  }\r\n    \r\n  createUploadTask(file: string): void {\r\n\r\n\r\n      this.image = 'data:image/jpg;base64,' + file;\r\n      this.uri=this.image;\r\n      let picture = `chats_ideaelan/images/${this.userJson.UserId}/${Math.floor(Date.now() / 1000)}`;\r\n      this.storageimage.ref(picture).putString(this.image, 'data_url').then(()=>{\r\n      this.storageimage.ref(picture).getDownloadURL().subscribe(url =>\r\n      {\r\n        const Url =url;\r\n        this.url=Url;\r\n        this.sendMessages(this.url);\r\n      })\r\n      \r\n    })\r\n  \r\n    \r\n}\r\n\r\n\r\nasync  loadUserDetails(instid,num ){\r\n   \r\n  await this.http.get(this.getUserDetails+`/${instid},${num},${this.userJson.UserId},${this.userJson.UserToken}`)\r\n    .subscribe(\r\n      async (data: any) => {\r\n        //RESPONSE\r\n    \r\n        let resSTR = JSON.stringify(data);\r\n        let resJSON = JSON.parse(resSTR);\r\n        console.log(\"user id details \",resJSON);\r\n        this.userChatJson=resJSON;\r\n        //this.userChatJson=this.userChatJson;\r\n        this.senderName=`${this.userChatJson[0].LastName} ${this.userChatJson[0].FirstName}`;\r\n        console.log(\"sendername \",this.senderName);\r\n       // console.log(\"adminlist1\",this.userChatJson);\r\n       // this.suppliesJson = resJSON;\r\n\r\n\r\n\r\n      },//ERROR HANDLING\r\n      error => {\r\n        let resErr = JSON.stringify(error);\r\n        // this.suppliesValue = false;\r\n        \r\n      }\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\nexport const snapshotToArray = snapshot => {\r\n  let returnArr = [];\r\n  snapshot.forEach(childSnapshot => {\r\n\r\n      let item = childSnapshot.val();\r\n     // $key:item.key\r\n     console.log(item);\r\n      item.key = childSnapshot.key;\r\n      returnArr.push(item);\r\n  });\r\n\r\n  return returnArr;\r\n};\r\n\r\nexport const snapshotToArrayNew = snapshot => {\r\n  let returnArr = [];\r\n\r\n  snapshot.forEach(childSnapshot => {\r\n      let item = childSnapshot.val();\r\n      returnArr.push(item);\r\n  });\r\n\r\n  return returnArr;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat-content/chat-content.ts"],"sourceRoot":""}